<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Account Linking FAQ  Reference</title>
    <link rel="icon" href="https://microblink.com/wp-content/uploads/2022/01/cropped-Microblink_Favicon-32x32.png" sizes="32x32" />
    <link rel="icon" href="https://microblink.com/wp-content/uploads/2022/01/cropped-Microblink_Favicon-192x192.png" sizes="192x192" />
    <link rel="apple-touch-icon" href="https://microblink.com/wp-content/uploads/2022/01/cropped-Microblink_Favicon-180x180.png" />
    <link rel="preload" as="font"
        href="https://microblink.com/wp-content/themes/microblink/assets/fonts/satoshi-bold-webfont.woff2" crossorigin>
    <link rel="preload" as="font"
        href="https://microblink.com/wp-content/themes/microblink/assets/fonts/satoshi-regular-webfont.woff2"
        crossorigin>
    <link rel="preload" as="font"
        href="https://microblink.com/wp-content/themes/microblink/assets/fonts/satoshi-medium-webfont.woff2"
        crossorigin>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <link rel="stylesheet" type="text/css" href="css/prism.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/jazzy.js" defer></script>
    <style> table {border: thin solid black; border-spacing: 0px} td {border: thin solid black; padding: 5px} </style>
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="Account Linking FAQ  Reference"></a>

    <header class="header">
      <p class="header-col">
        <img weight="20" height="20" src="https://microblink.com/wp-content/themes/microblink/assets/images/microblink-logo-animated.webp"/>
      </p>
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          BlinkEReceipt extension SDK 2.49.0 Docs
        </a>
        
      </p>
    
      <div class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </div>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/BlinkReceipt/blinkereceipt-ios">
            <img class="header-icon" src="img/gh.png" alt="GitHub"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">BlinkEReceipt extension SDK</a>
      <img class="carat" src="img/carat.png" alt=""/>
      <a class="breadcrumb" href="Guides.html">Guides</a>
      <img class="carat" src="img/carat.png" alt=""/>
      Account Linking FAQ  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Guides.html">Guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="account-linking.html">Account Linking</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="account-linking-faq.html">Account Linking FAQ</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="account-linking-retailers.html">Account Linking Retailers</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="e-receipt-parsing.html">E-Receipt Parsing</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="release-notes.html">Release Notes</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="sample-responses.html">Sample Responses</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BRAccountLinkingConfiguration.html">BRAccountLinkingConfiguration</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BRAccountLinkingConnection.html">BRAccountLinkingConnection</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BRAccountLinkingConnectionIdentifier.html">BRAccountLinkingConnectionIdentifier</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BRAccountLinkingCredentials.html">BRAccountLinkingCredentials</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BRAccountLinkingManager.html">BRAccountLinkingManager</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BREReceiptManager.html">BREReceiptManager</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BREmailAccount.html">BREmailAccount</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BRIMAPAccount.html">BRIMAPAccount</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BRAccountLinkingError.html">BRAccountLinkingError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BRAccountLinkingRetailer.html">BRAccountLinkingRetailer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BREReceiptIMAPError.html">BREReceiptIMAPError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BREReceiptProvider.html">BREReceiptProvider</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BREReceiptRemoteError.html">BREReceiptRemoteError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/BRSetupIMAPResult.html">BRSetupIMAPResult</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <h1 id='account-linking-faq' class='heading'>Account Linking FAQ</h1>

<p>This guide provides answers to some commonly asked questions specific to Account Linking.</p>
<h3 id='how-does-account-linking-handle-accounts-that-require-2fa-captcha-or-other-authentication-challenges' class='heading'>How does Account Linking handle accounts that require 2FA, CAPTCHA or other authentication challenges?</h3>

<p>Sometimes the user&rsquo;s input is required to successfully log in to a retailer account. This can happen when the user has two-factor authentication enabled, or when the retailer shows a CAPTCHA for extra verification.</p>

<p>In the Retailer Webview Authentication, the SDK will show the webview throughout the entire authentication process. With the legacy Host App Authentication, though, Microblink will handle these extra steps by exposing the webview when we detect these 2FA and CAPTCHAs.</p>

<p>For both <code>verifyRetailer</code> and <code>grabNewOrders</code>, additional authentication is handled in the same way:</p>

<ul>
  <li>The <strong>BRAccountLinkingError</strong> will indicate the stages of this process, which are listed below:
    <ul>
      <li><strong>BRAccountLinkingErrorVerificationNeeded</strong> indicates that the SDK has encountered a page that requires the user&rsquo;s input. The <strong>UIViewController</strong> parameter of the callback will be populated with the view controller that you should display.</li>
      <li><strong>BRAccountLinkingErrorVerificationCompleted</strong> indicates that the user successfully authenticated and you should now dismiss the view controller (note that the <strong>UIViewController</strong> callback parameter will be <strong>nil</strong> in this case but you do not need it to dismiss a presented modal, simply call, e.g. <strong>self.dismiss(animated: false))</strong>.</li>
    </ul>
  </li>
</ul>

<p>Example:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">taskId</span> <span class="o">=</span> <span class="kt">BRAccountLinkingManager</span><span class="o">.</span><span class="nf">shared</span><span class="p">()</span><span class="o">.</span><span class="nf">grabNewOrders</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">walmart</span><span class="p">)</span> <span class="p">{</span> <span class="n">retailer</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">remaining</span><span class="p">,</span> <span class="n">viewController</span><span class="p">,</span> <span class="n">errorCode</span><span class="p">,</span> <span class="n">sessionID</span> <span class="k">in</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">errorCode</span> <span class="o">==</span> <span class="o">.</span><span class="n">verificationNeeded</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">present</span><span class="p">(</span><span class="n">viewController</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">errorCode</span> <span class="o">==</span> <span class="o">.</span><span class="n">verificationCompleted</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">dismiss</span><span class="p">(</span><span class="nv">animated</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">errorCode</span> <span class="o">==</span> <span class="o">.</span><span class="k">none</span> <span class="p">{</span>
    <span class="c1">// Order may be returned here         </span>
    <span class="k">if</span> <span class="p">(</span><span class="n">remaining</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Grab Orders completed successfully</span>
      <span class="c1">// No more orders to fetch</span>
    <span class="p">}</span>            
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Grab Orders failed. Check error for more info</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<hr>
<h3 id='can-i-execute-account-linking-from-a-background-thread' class='heading'>Can I execute Account Linking from a background thread?</h3>

<p>Account Linking is not thread safe so we recommend all execution is done on the <strong>main</strong> thread.</p>

<hr>
<h3 id='can-i-link-multiple-accounts-for-the-same-retailer' class='heading'>Can I link multiple accounts for the same retailer?</h3>

<p>Linking multiple accounts for the same retailer is not supported. You should unlink the account first before you link a different one for the same retailer.</p>

<hr>
<h3 id='can-i-change-a-user-39-s-credentials' class='heading'>Can I change a user&rsquo;s credentials?</h3>

<p>Modifying a user&rsquo;s credentials is not allowed after the <a href="https://blinkreceipt.github.io/blinkereceipt-ios/Classes/BRAccountLinkingConnection.html">BRAccountLinkingConnection</a> object is created. In order for you to change the credentials, you have to unlink the account first and then create and link a new connection with different credentials.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">username</span> <span class="o">=</span> <span class="s">"user 1"</span>
<span class="k">let</span> <span class="nv">password</span> <span class="o">=</span> <span class="s">"pass 1"</span>
<span class="k">let</span> <span class="nv">connection</span> <span class="o">=</span> <span class="kt">BRAccountLinkingConnection</span><span class="p">(</span><span class="nv">retailer</span><span class="p">:</span> <span class="o">.</span><span class="n">walmart</span><span class="p">,</span> <span class="nv">username</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span> <span class="nv">password</span><span class="p">:</span> <span class="n">password</span><span class="p">)</span>
<span class="kt">BRAccountLinkingManager</span><span class="o">.</span><span class="nf">shared</span><span class="p">()</span><span class="o">.</span><span class="nf">linkRetailer</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">connection</span><span class="p">)</span>

<span class="kt">BRAccountLinkingManager</span><span class="o">.</span><span class="nf">shared</span><span class="p">()</span><span class="o">.</span><span class="nf">unlinkAccount</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">walmart</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">conn</span> <span class="o">=</span> <span class="kt">BRAccountLinkingConnection</span><span class="p">(</span><span class="nv">retailer</span><span class="p">:</span> <span class="o">.</span><span class="n">walmart</span><span class="p">,</span> <span class="nv">username</span><span class="p">:</span> <span class="s">"user 2"</span><span class="p">,</span> <span class="nv">password</span><span class="p">:</span> <span class="s">"pass 2"</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">dayCutoff</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="kt">BRAccountLinkingManager</span><span class="o">.</span><span class="nf">shared</span><span class="p">()</span><span class="o">.</span><span class="nf">linkRetailer</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">conn</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    <p>It is recommended to call <a href="https://blinkreceipt.github.io/blinkereceipt-ios/Classes/BRAccountLinkingManager.html#/c:objc(cs)BRAccountLinkingManager(im)verifyRetailerWithConnection:withCompletion:">verifyRetailer</a> before linking if unsure whether credentials are valid.</p>

</div>

<hr>
<h3 id='how-does-account-linking-handle-user-credentials' class='heading'>How does Account Linking handle user credentials?</h3>

<p>All account credentials are encrypted and stored locally on the device&rsquo;s keychain. Credentials don&rsquo;t leave the device and are only used after the retailer session has expired and re-authentication is required.</p>

<hr>
<h3 id='what-happens-if-a-href-https-blinkreceipt-github-io-blinkereceipt-ios-classes-braccountlinkingmanager-html-c-objc-cs-braccountlinkingmanager-im-grabnewordersforretailer-withcompletion-grabneworders-a-returns-success-but-i-don-39-t-see-any-new-orders' class='heading'>What happens if <a href="https://blinkreceipt.github.io/blinkereceipt-ios/Classes/BRAccountLinkingManager.html#/c:objc(cs)BRAccountLinkingManager(im)grabNewOrdersForRetailer:withCompletion:">grabNewOrders</a> returns success but i don&rsquo;t see any new orders?</h3>

<p>The most common reasons include:</p>

<ul>
<li>Make sure your connection <a href="https://blinkreceipt.github.io/blinkereceipt-ios/Classes/BRAccountLinkingConfiguration.html#/c:objc(cs)BRAccountLinkingConfiguration(py)dayCutoff">dayCutoff</a> or <a href="https://blinkreceipt.github.io/blinkereceipt-ios/Classes/BRAccountLinkingConfiguration.html#/c:objc(cs)BRAccountLinkingConfiguration(py)dateCutoff">dateCutoff</a> is large enough to capture your orders. You can verify that by logging in to your retailer account and verifying that you have purchases more recent than your <code>dayCutoff</code>.</li>
<li>You haven&rsquo;t reset <a href="https://blinkreceipt.github.io/blinkereceipt-ios/Classes/BRAccountLinkingManager.html#/c:objc(cs)BRAccountLinkingManager(im)resetHistoryForRetailer:">orders history</a>. Remember to reset the cache while testing. By default the SDK maintains an internal date of the last successful search for each retailer so that each time you attempt to retrieve new messages, you will only get messages since the last successful check, and subject to the day cutoff that you set (default is 15 days).<br /></li>
</ul>

<p>You can also reach out to us at <a href="mailto:blinkreceipt@microblink.com">blinkreceipt@microblink.com</a>, if you are still not seeing orders after trying the steps above.</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    <p>Unlinking an account won&rsquo;t reset the user&rsquo;s cache if the same user is linked again. To make sure the cache is removed, you must call  <code>BRAccountLinkingManager.shared().resetHistory(for: .walmart)</code> for the retailer (in this example, we removed the cache from <code>Walmart</code>).</p>

</div>

<hr>
<h3 id='can-i-collect-purchase-information-related-to-in-store-purchases' class='heading'>Can I collect purchase information related to in-store purchases?</h3>

<p>Yes, Account Linking supports <code>In-Store</code> purchases as long as they are visible in the account. </p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    <p>Target, Walmart, Kroger are just few of the popular merchants that allow their customers to see their <code>In-Store</code> purchases on the web.  </p>

</div>

<hr>
<h3 id='what-order-types-are-supported' class='heading'>What order types are supported?</h3>

<p>Account Linking supports the following <a href="https://blinkreceipt.github.io/blinkreceipt-ios/Classes/BRScanResults.html#/c:objc(cs)BRScanResults(py)purchaseType">order types</a>:</p>

<ol>
<li><strong>In-Store</strong> - Purchases made in store.</li>
<li><strong>Delivery</strong> - Online purchases that are shipped to the customer.<br></li>
<li><strong>Pickup</strong> - Online purchases that are picked up in store by the customer.</li>
<li><strong>Digital</strong> - Movies, eBooks, songs, digital storage, etc.</li>
</ol>

<hr>
<h3 id='does-account-linking-return-an-order-status-for-each-of-my-purchases' class='heading'>Does Account Linking return an order status for each of my purchases?</h3>

<p>Account Linking returns the following values attached to each purchase: <code>ordered</code>, <code>ready for pickup</code>, <code>shipped</code>, <code>completed</code>, <code>cancelled</code>, <code>refunded</code>, <code>returned</code>. Depending on the retailer and the order type you may see these values populated in one of the following places:</p>

<ol>
<li><a href="https://blinkreceipt.github.io/blinkreceipt-ios/Classes/BRScanResults.html#/c:objc(cs)BRScanResults(py)ereceiptOrderStatus">Order status</a> - A status representing the whole order</li>
<li><a href="https://blinkreceipt.github.io/blinkreceipt-ios/Classes/BRShipment.html#/c:objc(cs)BRShipment(py)status">Shipment status</a> - A status representing a single shipment. Available for <code>Delivery</code> orders only</li>
<li><a href="https://blinkreceipt.github.io/blinkreceipt-ios/Classes/BRProduct.html#/c:objc(cs)BRProduct(py)shippingStatus">Product status</a> - A status for a single product.</li>
</ol>

<hr>
<h3 id='is-account-linking-going-to-return-a-previously-fetched-order-if-its-status-changes-from-shipped-to-delivered' class='heading'>Is Account Linking going to return a previously fetched order, if its status changes from shipped to delivered?</h3>

<p>Account Linking only returns an order once. To get the most recent version of an order you have to re-scrape the order by resetting the order history.</p>
<pre class="highlight swift"><code><span class="kt">BRAccountLinkingManager</span><span class="o">.</span><span class="nf">shared</span><span class="p">()</span><span class="o">.</span><span class="nf">resetHistory</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">walmart</span><span class="p">)</span>
</code></pre>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2025 <a class="link" href="https://www.blinkreceipt.com" target="_blank" rel="external noopener">BlinkReceipt LLC</a>. All rights reserved. (Last updated: 2025-08-21)</p>
      
    </section>
  </body>
</html>
